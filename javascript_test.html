<!DOCTYPE html>
<html>
  <head>
    <title>Hurricane Danger Zones</title>
    <style>
      #map {
        height: 100vh;
        width: 100%;
      }
    </style>
    <script>
      let map;
      
      function initMap() {
        // Initialize the Google Map centered on a default location
        map = new google.maps.Map(document.getElementById("map"), {
          zoom: 6,
          center: { lat: 25.7617, lng: -80.1918 }, // Miami as default center
        });

        // Fetch and display weather data
        fetchHurricaneData();
      }

      async function fetchHurricaneData() {
        const apiKey = '30bfedf90f5f33c670ff02053c1e493e';  // Replace with your weather API key
        const url = `https://api.openweathermap.org/data/2.5/onecall?lat=25.7617&lon=-80.1918&exclude=minutely,hourly,daily&appid=${apiKey}`;

        try {
          const response = await fetch(url);
          const data = await response.json();
          console.log(data);

          // Example of fetching hurricane information from the weather API
          // You'll need to adapt this based on the weather API's structure
          const hurricaneCoordinates = [
            { lat: 25.7617, lng: -80.1918 },
            { lat: 26.7617, lng: -81.1918 },
            { lat: 27.7617, lng: -82.1918 },
          ];

          addHurricaneZone(map, hurricaneCoordinates);
        } catch (error) {
          console.error("Error fetching weather data:", error);
        }
      }

      function addHurricaneZone(map, hurricaneCoordinates) {
        // Define a polygon to represent a hurricane zone
        const dangerZone = new google.maps.Polygon({
          paths: hurricaneCoordinates,
          strokeColor: "#FF0000",
          strokeOpacity: 0.8,
          strokeWeight: 2,
          fillColor: "#FF0000",
          fillOpacity: 0.35,
        });
        
        // Set the polygon on the map
        dangerZone.setMap(map);

        // Add an info window on click
        const infoWindow = new google.maps.InfoWindow({
          content: "<h3>Hurricane Alert</h3><p>Stay Safe!</p>",
        });

        dangerZone.addListener("click", () => {
          infoWindow.setPosition(hurricaneCoordinates[0]); // Position at the first point
          infoWindow.open(map);
        });
      }
    </script>
  </head>
  <body>
    <div id="map"></div>

    <!-- Google Maps API -->
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB00U7TY2GZJANOC34L6KXnWnlr3bax8rE&callback=initMap"></script>
  </body>
</html>
